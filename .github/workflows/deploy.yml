# 워크플로우의 이름입니다. Actions 탭에 이 이름으로 표시됩니다.
name: Deploy to GitHub Pages

# 이 워크플로우가 언제 실행될지를 지정합니다.
on:
  # main 브랜치에 push 이벤트가 발생했을 때 실행됩니다.
  push:
    branches:
      - main
  # Actions 탭에서 수동으로 실행할 수도 있도록 합니다.
  workflow_dispatch:

# 이 워크플로우가 GitHub Pages에 배포할 권한을 갖도록 설정합니다.
permissions:
  contents: read
  pages: write
  id-token: write

# 실제 수행할 작업들을 정의합니다.
jobs:
  # build 작업은 현재 프로젝트에선 필요 없으므로 바로 deploy로 넘어갑니다.
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    steps:
      # 1. 저장소의 코드를 불러옵니다 (Checkout).
      - name: Checkout
        uses: actions/checkout@v4

      # 2. GitHub Pages에 필요한 아티팩트를 설정합니다.
      - name: Setup Pages
        uses: actions/configure-pages@v5

      # 3. Pages 아티팩트를 업로드합니다.
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          # 현재 폴더 전체를 업로드 대상으로 지정합니다.
          path: '.'

      # 4. 업로드된 아티팩트를 GitHub Pages에 배포합니다.
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
